<Window
    x:Class="EditableListView.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behavior="clr-namespace:EditableListView.Behavior"
    xmlns:converter="clr-namespace:EditableListView.XAMLConverter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:EditableListView"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Editable ListView"
    Width="800"
    Height="450"
    mc:Ignorable="d">

    <Window.Resources>
        <DataTemplate x:Key="HeaderTemplateArrowUp">
            <DockPanel>
                <TextBlock HorizontalAlignment="Center" Text="{Binding}" />
                <Path
                    x:Name="arrow"
                    Data="M 5,10 L 15,10 L 10,5 L 5,10"
                    Fill="Gray"
                    StrokeThickness="1" />
            </DockPanel>
        </DataTemplate>

        <DataTemplate x:Key="HeaderTemplateArrowDown">
            <DockPanel>
                <TextBlock HorizontalAlignment="Center" Text="{Binding}" />
                <Path
                    x:Name="arrow"
                    Data="M 5,5 L 10,10 L 15,5 L 5,5"
                    Fill="Gray"
                    StrokeThickness="1" />
            </DockPanel>
        </DataTemplate>

        <converter:BooleanVisiblityConverter x:Key="convVis" />
        <Style x:Key="ListViewUnSelected" TargetType="{x:Type TextBlock}">
            <Setter Property="Visibility" Value="{Binding Path=IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}, Converter={StaticResource convVis}, ConverterParameter=False}" />
        </Style>

        <Style x:Key="ListViewUnSelectedCB" TargetType="{x:Type CheckBox}">
            <Setter Property="IsEnabled" Value="{Binding Path=IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}, Converter={StaticResource convVis}, ConverterParameter=false}" />
        </Style>

        <Style x:Key="ListViewSelected" TargetType="{x:Type FrameworkElement}">
            <Setter Property="Visibility" Value="{Binding Path=IsSelected, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}, Converter={StaticResource convVis}, ConverterParameter=True}" />
        </Style>
    </Window.Resources>

    <Grid x:Name="grdMain">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <GroupBox Header="Filter">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="5,0" Text="Filter By :" />
                    <ComboBox
                        x:Name="cmbProperty"
                        Width="100"
                        ItemsSource="{Binding Path=Columns}" />
                    <TextBox x:Name="txtFilter" MinWidth="100" />

                    <Button
                        x:Name="btnFilter"
                        Margin="5,0"
                        Content="Ausführen Filter" />

                    <Button x:Name="btnClearFilter" Content="Löschen Filter" />
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </Grid>
</Window>
